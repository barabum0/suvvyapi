{"openapi":"3.0.2","info":{"title":"Suvvy AI API","description":"### There's also a python api wrapper!\n[![suvvyapi](https://img.shields.io/badge/suvvyapi-blue?style=for-the-badge&logo=python&logoColor=white)](https://pypi.org/project/suvvyapi)\n","termsOfService":"https://suvvy.ai/ru/agreement","version":"v1"},"servers":[{"url":"/api/v1"}],"paths":{"/errors":{"options":{"summary":"Errors, That May Appear Are Here","description":"Errors from this method may appear in any of this methods","operationId":"Errors__that_may_appear_are_here_errors_options","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Errors  That May Appear Are Here Errors Options","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidToken"}}}}}}},"/history":{"get":{"tags":["History"],"summary":"Get History","operationId":"get_history_history_get","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicHistory"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Get History History Get","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]},"put":{"tags":["History","Predict"],"summary":"Reset Message History","operationId":"reset_message_history_history_put","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryResetResponse"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Reset Message History History Put","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/message":{"post":{"tags":["History"],"summary":"Add Message To History","operationId":"add_message_to_history_history_message_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/POSTMessageHistoryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageAddedResponse"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Add Message To History History Message Post","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"406":{"description":"Not Acceptable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsupportedMessageAdded"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]},"delete":{"tags":["History"],"summary":"Delete Message From History","operationId":"delete_message_from_history_history_message_delete","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DELETEMessageHistoryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageDeletedResponse"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Delete Message From History History Message Delete","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogMessageNotFound"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"AdminInstanceAuthentication":[]}]}},"/history/message/audio":{"post":{"tags":["History"],"summary":"Add Audio To History","description":"Add audio message to history (and transcribe it).\n\n_accepts only wav, mp3 and ogg files_","operationId":"add_audio_to_history_history_message_audio_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_add_audio_to_history_history_message_audio_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageAddedResponse"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Add Audio To History History Message Audio Post","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"415":{"description":"Unsupported Media Type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidFileType"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/message/image":{"post":{"tags":["History"],"summary":"Add Image To History","operationId":"Add_image_to_history_history_message_image_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_Add_image_to_history_history_message_image_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageAddedResponse"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenLimitExceeded"}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"title":"Response 402 Add Image To History History Message Image Post","anyOf":[{"$ref":"#/components/schemas/BalanceBelowZero"},{"$ref":"#/components/schemas/NotEnoughBalance"}]}}}},"415":{"description":"Unsupported Media Type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidFileType"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/predict":{"post":{"tags":["History","Predict"],"summary":"Predict Chat With History","operationId":"predict_chat_with_history_history_predict_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/POSTPredictRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryPrediction"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"title":"Response 413 Predict Chat With History History Predict Post","anyOf":[{"$ref":"#/components/schemas/TokenLimitExceeded"},{"$ref":"#/components/schemas/MessageLimitExceeded"}]}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceBelowZero"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogNotFound"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogInterceptedStopped"}}}},"406":{"description":"Not Acceptable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnsupportedMessageAdded"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/message/predict":{"post":{"tags":["History","Shortcuts","Predict"],"summary":"Predict After Add Message","description":"Shortcut for POST /history/message -> POST /history/predict","operationId":"predict_after_add_message_history_message_predict_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/POSTPredictAfterAddMessageRequest"},"example":{"messages":[{"text":"Hi!","role":"human"}],"pass_ai_as_employee":true,"placeholders":{},"auto_insert_ai":true,"start_message_index":0,"source":"basic"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryPrediction"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"title":"Response 413 Predict After Add Message History Message Predict Post","anyOf":[{"$ref":"#/components/schemas/TokenLimitExceeded"},{"$ref":"#/components/schemas/MessageLimitExceeded"}]}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceBelowZero"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogNotFound"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogInterceptedStopped"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/message/audio/predict":{"post":{"tags":["History","Shortcuts","Predict"],"summary":"Predict After Add Audio","description":"Shortcut for POST /history/message/audio -> POST /history/predict\n\n_Not recommended to use, because you will lose prediction settings (placeholders, etc.)_","operationId":"predict_after_add_audio_history_message_audio_predict_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_predict_after_add_audio_history_message_audio_predict_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryPrediction"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"title":"Response 413 Predict After Add Audio History Message Audio Predict Post","anyOf":[{"$ref":"#/components/schemas/TokenLimitExceeded"},{"$ref":"#/components/schemas/MessageLimitExceeded"}]}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceBelowZero"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogNotFound"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogInterceptedStopped"}}}},"415":{"description":"Unsupported Media Type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidFileType"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}},"/history/message/image/predict":{"post":{"tags":["History","Shortcuts","Predict"],"summary":"Predict After Add Image","description":"Shortcut for POST /history/message/image -> POST /history/predict\n\n_Not recommended to use, because you will lose prediction settings (placeholders, etc.)_","operationId":"predict_after_add_image_history_message_image_predict_post","parameters":[{"required":true,"schema":{"title":"Unique Id","type":"string"},"name":"unique_id","in":"query"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_predict_after_add_image_history_message_image_predict_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryPrediction"}}}},"413":{"description":"Request Entity Too Large","content":{"application/json":{"schema":{"title":"Response 413 Predict After Add Image History Message Image Predict Post","anyOf":[{"$ref":"#/components/schemas/TokenLimitExceeded"},{"$ref":"#/components/schemas/MessageLimitExceeded"}]}}}},"402":{"description":"Payment Required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceBelowZero"}}}},"404":{"description":"Not Found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogNotFound"}}}},"202":{"description":"Accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DialogInterceptedStopped"}}}},"415":{"description":"Unsupported Media Type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidFileType"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"InstanceAuthentication":[]}]}}},"components":{"schemas":{"AudioDetails":{"title":"AudioDetails","required":["audio_id"],"type":"object","properties":{"audio_id":{"title":"Audio Id","type":"integer"}}},"BalanceBelowZero":{"title":"BalanceBelowZero","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Your balance is below zero"}}},"BalanceUsage":{"title":"BalanceUsage","type":"object","properties":{"prompt_tokens":{"title":"Prompt Tokens","type":"integer","default":0},"completion_tokens":{"title":"Completion Tokens","type":"integer","default":0},"knowledge_usage":{"title":"Knowledge Usage","type":"integer","default":0},"function_usage":{"title":"Function Usage","type":"integer","default":0},"total_tokens":{"title":"Total Tokens","type":"integer","default":0},"token_multiplier":{"title":"Token Multiplier","type":"number","default":1.0}}},"Body_Add_image_to_history_history_message_image_post":{"title":"Body_Add_image_to_history_history_message_image_post","required":["image"],"type":"object","properties":{"image":{"title":"Image","type":"string","format":"binary"}}},"Body_add_audio_to_history_history_message_audio_post":{"title":"Body_add_audio_to_history_history_message_audio_post","required":["audio_file"],"type":"object","properties":{"audio_file":{"title":"Audio File","type":"string","format":"binary"}}},"Body_predict_after_add_audio_history_message_audio_predict_post":{"title":"Body_predict_after_add_audio_history_message_audio_predict_post","required":["audio_file"],"type":"object","properties":{"audio_file":{"title":"Audio File","type":"string","format":"binary"}}},"Body_predict_after_add_image_history_message_image_predict_post":{"title":"Body_predict_after_add_image_history_message_image_predict_post","required":["image"],"type":"object","properties":{"image":{"title":"Image","type":"string","format":"binary"}}},"DELETEMessageHistoryRequest":{"title":"DELETEMessageHistoryRequest","required":["message_ids"],"type":"object","properties":{"message_ids":{"title":"Message Ids","type":"array","items":{"type":"integer"}}}},"DialogInterceptedStopped":{"title":"DialogInterceptedStopped","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Dialog with this unique is was intercepted or stopped"}}},"DialogMessageNotFound":{"title":"DialogMessageNotFound","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Message with this ID not found"}}},"DialogNotFound":{"title":"DialogNotFound","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Dialog with this unique id not found"}}},"FunctionDetails":{"title":"FunctionDetails","required":["name"],"type":"object","properties":{"name":{"title":"Name","type":"string"},"args":{"title":"Args","type":"object"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"HistoryPrediction":{"title":"HistoryPrediction","required":["prediction","instance_id","generation_info"],"type":"object","properties":{"prediction":{"title":"Prediction","type":"string"},"context":{"title":"Context","type":"string","default":""},"instance_id":{"title":"Instance Id","type":"integer"},"generation_info":{"$ref":"#/components/schemas/LLMResult"},"new_messages":{"title":"New Messages","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"},"default":[]}}},"HistoryResetResponse":{"title":"HistoryResetResponse","required":["deleted_history"],"type":"object","properties":{"deleted_history":{"$ref":"#/components/schemas/PublicHistory"}}},"ImageDetails":{"title":"ImageDetails","required":["image_id"],"type":"object","properties":{"image_id":{"title":"Image Id","type":"integer"}}},"InvalidFileType":{"title":"InvalidFileType","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Uploaded file has invalid type"}}},"InvalidToken":{"title":"InvalidToken","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Invalid token"}}},"LLMResult":{"title":"LLMResult","type":"object","properties":{"token_usage":{"title":"Token Usage","allOf":[{"$ref":"#/components/schemas/TokenUsage"}],"default":{"prompt_tokens":0,"completion_tokens":0,"total_tokens":0}},"balance_usage":{"title":"Balance Usage","allOf":[{"$ref":"#/components/schemas/BalanceUsage"}],"default":{"prompt_tokens":0,"completion_tokens":0,"knowledge_usage":0,"function_usage":0,"total_tokens":0,"token_multiplier":1.0}}}},"Message":{"title":"Message","required":["role"],"type":"object","properties":{"text":{"title":"Text","type":"string","description":"Message text, function result","default":""},"role":{"title":"Role","enum":["human","ai","function_result","function_call","sent_image","audio_message","system"],"type":"string"},"function":{"title":"Function","allOf":[{"$ref":"#/components/schemas/FunctionDetails"}],"description":"Needed for functions. Unused if role != \"function_*\"."},"image":{"title":"Image","allOf":[{"$ref":"#/components/schemas/ImageDetails"}],"description":"Needed for images. Unused if role != \"sent_image\"."},"audio":{"title":"Audio","allOf":[{"$ref":"#/components/schemas/AudioDetails"}],"description":"Needed for images. Unused if role != \"audio_message\"."}}},"MessageAddedResponse":{"title":"MessageAddedResponse","required":["history","unique_id","user_id","added_messages"],"type":"object","properties":{"history":{"title":"History","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"}},"unique_id":{"title":"Unique Id","type":"string"},"user_id":{"title":"User Id","type":"integer"},"last_instance_id":{"title":"Last Instance Id","type":"integer"},"last_source":{"title":"Last Source","type":"string"},"stopped":{"title":"Stopped","type":"boolean","default":false},"stop_reason":{"title":"Stop Reason","type":"string","default":"unknown"},"last_interaction_time":{"title":"Last Interaction Time","type":"string","format":"date-time"},"created_time":{"title":"Created Time","type":"string","format":"date-time"},"channel_name":{"title":"Channel Name","enum":["api","telegram_bot","jivo","bitrix","amocrm","whatsapp"],"type":"string","default":"api"},"added_messages":{"title":"Added Messages","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"}},"balance_usage":{"title":"Balance Usage","type":"integer","default":0}}},"MessageDeletedResponse":{"title":"MessageDeletedResponse","required":["history","unique_id","user_id","deleted_messages"],"type":"object","properties":{"history":{"title":"History","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"}},"unique_id":{"title":"Unique Id","type":"string"},"user_id":{"title":"User Id","type":"integer"},"last_instance_id":{"title":"Last Instance Id","type":"integer"},"last_source":{"title":"Last Source","type":"string"},"stopped":{"title":"Stopped","type":"boolean","default":false},"stop_reason":{"title":"Stop Reason","type":"string","default":"unknown"},"last_interaction_time":{"title":"Last Interaction Time","type":"string","format":"date-time"},"created_time":{"title":"Created Time","type":"string","format":"date-time"},"channel_name":{"title":"Channel Name","enum":["api","telegram_bot","jivo","bitrix","amocrm","whatsapp"],"type":"string","default":"api"},"deleted_messages":{"title":"Deleted Messages","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"}}}},"MessageInHistory":{"title":"MessageInHistory","required":["role","time","message_id"],"type":"object","properties":{"text":{"title":"Text","type":"string","description":"Message text, function result","default":""},"role":{"title":"Role","enum":["human","ai","function_result","function_call","sent_image","audio_message","system"],"type":"string"},"function":{"title":"Function","allOf":[{"$ref":"#/components/schemas/FunctionDetails"}],"description":"Needed for functions. Unused if role != \"function_*\"."},"image":{"title":"Image","allOf":[{"$ref":"#/components/schemas/ImageDetails"}],"description":"Needed for images. Unused if role != \"sent_image\"."},"audio":{"title":"Audio","allOf":[{"$ref":"#/components/schemas/AudioDetails"}],"description":"Needed for images. Unused if role != \"audio_message\"."},"tokens":{"title":"Tokens","type":"integer","default":0},"time":{"title":"Time","type":"string","format":"date-time"},"message_id":{"title":"Message Id","type":"integer"},"context":{"title":"Context","type":"string","default":""},"simplified_text":{"title":"Simplified Text","type":"string"}}},"MessageLimitExceeded":{"title":"MessageLimitExceeded","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Maximum message limit of this instance exceeded"}}},"NotEnoughBalance":{"title":"NotEnoughBalance","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"There are not enough tokens on your balance to perform this action"}}},"POSTMessageHistoryRequest":{"title":"POSTMessageHistoryRequest","required":["messages"],"type":"object","properties":{"messages":{"title":"Messages","type":"array","items":{"$ref":"#/components/schemas/Message"}},"pass_ai_as_employee":{"title":"Pass Ai As Employee","type":"boolean","default":true}}},"POSTPredictAfterAddMessageRequest":{"title":"POSTPredictAfterAddMessageRequest","required":["messages"],"type":"object","properties":{"messages":{"title":"Messages","type":"array","items":{"$ref":"#/components/schemas/Message"}},"pass_ai_as_employee":{"title":"Pass Ai As Employee","type":"boolean","default":true},"placeholders":{"title":"Placeholders","type":"object","default":{}},"auto_insert_ai":{"title":"Auto Insert Ai","type":"boolean","default":true},"custom_log_info":{"title":"Custom Log Info","type":"object"},"start_message_index":{"title":"Start Message Index","type":"integer","default":0},"source":{"title":"Source","type":"string","default":"basic"}}},"POSTPredictRequest":{"title":"POSTPredictRequest","type":"object","properties":{"placeholders":{"title":"Placeholders","type":"object","default":{}},"auto_insert_ai":{"title":"Auto Insert Ai","type":"boolean","default":true},"custom_log_info":{"title":"Custom Log Info","type":"object"},"start_message_index":{"title":"Start Message Index","type":"integer","default":0},"source":{"title":"Source","type":"string","default":"basic"}}},"PublicHistory":{"title":"PublicHistory","required":["history","unique_id","user_id"],"type":"object","properties":{"history":{"title":"History","type":"array","items":{"$ref":"#/components/schemas/MessageInHistory"}},"unique_id":{"title":"Unique Id","type":"string"},"user_id":{"title":"User Id","type":"integer"},"last_instance_id":{"title":"Last Instance Id","type":"integer"},"last_source":{"title":"Last Source","type":"string"},"stopped":{"title":"Stopped","type":"boolean","default":false},"stop_reason":{"title":"Stop Reason","type":"string","default":"unknown"},"last_interaction_time":{"title":"Last Interaction Time","type":"string","format":"date-time"},"created_time":{"title":"Created Time","type":"string","format":"date-time"},"channel_name":{"title":"Channel Name","enum":["api","telegram_bot","jivo","bitrix","amocrm","whatsapp"],"type":"string","default":"api"}}},"TokenLimitExceeded":{"title":"TokenLimitExceeded","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"Maximum token limit of this model exceeded"}}},"TokenUsage":{"title":"TokenUsage","type":"object","properties":{"prompt_tokens":{"title":"Prompt Tokens","type":"integer","default":0},"completion_tokens":{"title":"Completion Tokens","type":"integer","default":0},"total_tokens":{"title":"Total Tokens","type":"integer","default":0}}},"UnsupportedMessageAdded":{"title":"UnsupportedMessageAdded","type":"object","properties":{"detail":{"title":"Detail","type":"string","default":"You can't add messages with role != \"ai\", \"human\" or with role-specific details"}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}},"securitySchemes":{"InstanceAuthentication":{"type":"http","scheme":"bearer"},"AdminInstanceAuthentication":{"type":"http","scheme":"bearer"}}}}